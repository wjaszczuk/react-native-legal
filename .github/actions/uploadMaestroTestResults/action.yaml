name: Upload Maestro test results
description: Upload Maestro test results as artifacts

inputs:
  id:
    description: 'artifact ID'
    required: true

runs:
  using: composite
  steps:
    - name: Test Report
      uses: dorny/test-reporter@v2
      continue-on-error: true
      with:
        name: Maestro E2E test report ${{ steps.random-number-generator.outputs.random-number }}
        path: ${{ github.workspace }}/examples/bare-example/e2e_results/report.xml
        reporter: java-junit

    - name: Upload report
      uses: actions/upload-artifact@v4
      continue-on-error: true
      with:
        name: Maestro E2E recordings and screenshots ${{ steps.random-number-generator.outputs.random-number }}
        path: |
          ${{ github.workspace }}/examples/bare-example/e2e_results/*.mp4
          ${{ github.workspace }}/examples/bare-example/e2e_results/*.png
          recording.mp4

    - name: Upload report
      uses: actions/upload-artifact@v4
      continue-on-error: true
      with:
        name: Maestro E2E test logs API ${{ steps.random-number-generator.outputs.random-number }}
        path: |
          ~/.maestro/tests/**
